<!DOCTYPE html>
<html>
<head>
    <meta charset=UTF-8>
    <title></title>
</head>
<body>

<h2>Number of speakes of each language:</h2>

<button id="prev">Prev</button>
<button id="next">Next</button>

<p id="demo"></p>

<script>

    var xmlhttp, myObj;

    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            myObj = JSON.parse(this.responseText);

            //multiply common speaking language and add them to array r
            var r = myObj.lang.reduce(function(a, b) {
                if (a[b.language]) {
                    a[b.language] += b.speakers*1;
                } else {
                    a[b.language] = b.speakers*1;
                }
                return a;
            }, {});
            console.log(r);

            //sort array function by language
            var sortable = [];
            for (var obj in r) {
                sortable.push([obj, r[obj]]);
            }
            sortable.sort(function (a, b) {
                if(a[0] < b[0]) return -1;
                if(a[0] > b[0]) return 1;
                return 0;
            })


            var x = sortable.length/40;
            var i = 0, j = 39;

           // if ()



            console.log(sortable.slice(i,j));

            //create table from array with index, language and speakers
            var txt = "";
            txt += "<table border='1'>"
            txt += "<tr><td>Number</td>";
            txt += "<td>Language</td>";
            txt += "<td>Speakers</td></tr>";

            for (i; i<=j; i++) {
                txt += "<tr><td>" + (i * 1 + 1) + "</td>";
                txt += "<td>" + sortable[i][0] + "</td>";
                txt += "<td>" + sortable[i][1] + "</td></tr>";
            }
            txt += "</table>"
            document.getElementById("demo").innerHTML = txt;
        }
    };

    xmlhttp.open("GET", "languages.json", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send(null);

</script>

</body>
</html>